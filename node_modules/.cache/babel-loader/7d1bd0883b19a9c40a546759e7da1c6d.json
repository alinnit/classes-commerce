{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alin\\\\Desktop\\\\Projects\\\\class-commerce\\\\src\\\\Components\\\\Context.js\";\nimport React, { Component } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const DataContext = /*#__PURE__*/React.createContext();\nexport class DataProvider extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateProduct = id => {\n      this.setState({\n        currentProduct: id\n      });\n    };\n\n    this.updateCategory = name => {\n      this.setState({\n        currentCategory: name\n      });\n    };\n\n    this.updateCurrency = e => {\n      this.setState({\n        currenctCurrency: e.target.value\n      });\n    };\n\n    this.mergeObject = (product, selectedObject) => {\n      this.setState({\n        productCartForm: { ...product,\n          selectedObject\n        }\n      });\n    };\n\n    this.mergeAttributes = () => {\n      this.state.selectedArr.push(this.state.productCartForm);\n    };\n\n    this.addCart = id => {\n      const {\n        cart,\n        productCartForm\n      } = this.state;\n      const check = cart.every(item => {\n        return item.id !== id;\n      });\n\n      if (check) {\n        cart.push(productCartForm);\n        this.setState({\n          productCartForm: {}\n        });\n      } else {\n        alert(\"Product has already been added to the cart.\");\n      }\n    };\n\n    this.state = {\n      products: {},\n      categories: [],\n      currentCategory: \"all\",\n      currentProduct: \"ps-5\",\n      currentCurrency: \"0\",\n      cart: [],\n      selectedObject: {},\n      selectedArr: [],\n      productCartForm: {},\n      productNoSelection: {},\n      product: {}\n    };\n  }\n\n  componentDidMount() {\n    this.loadCategories();\n    this.loadProduct();\n  }\n\n  async loadCategories() {\n    const res = await fetch(\"http://localhost:4000/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        query: `\n          query {\n            categories {\n              name\n              products {\n                id\n                name\n                inStock\n                gallery\n                description\n                category\n                attributes {\n                  id\n                  name\n                  type\n                  items {\n                    displayValue\n                    value\n                    id\n                  }\n                }\n                prices {\n                  currency {\n                    label\n                    symbol\n                  }\n                  amount\n                }\n                brand\n              }\n            }\n        }\n         `\n      })\n    });\n    const {\n      data\n    } = await res.json();\n    const {\n      categories\n    } = data || {};\n    this.setState({\n      categories\n    });\n    this.setState({\n      products: categories[0].products\n    });\n  }\n\n  async loadProduct() {\n    const res = await fetch(\"http://localhost:4000/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        query: `\n        query {\n            product (id: \"${this.state.currentProduct}\") { \n            id\n            name\n            inStock\n            gallery\n            description\n            category\n            attributes {\n              id\n              name\n              type\n              items {\n                displayValue\n                value\n                id\n              }\n            }\n            prices {\n              currency {\n                label\n                symbol\n              }\n              amount\n            }\n            brand\n          }\n        }\n       `\n      })\n    });\n    const {\n      data\n    } = await res.json();\n    const {\n      product\n    } = data || {};\n    this.setState({\n      product\n    });\n  }\n\n  render() {\n    const {\n      products,\n      categories,\n      currentCategory,\n      currentProduct,\n      currentCurrency,\n      cart,\n      selectedObject = {},\n      selectedArr,\n      productNoSelection,\n      productCartForm,\n      product\n    } = this.state;\n    const {\n      updateProduct,\n      updateCategory,\n      updateCurrency,\n      mergeObject,\n      mergeAttributes,\n      addCart\n    } = this; // console.log(currentCurrency)\n\n    return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n      value: {\n        products,\n        categories,\n        currentCategory,\n        currentProduct,\n        currentCurrency,\n        updateCategory,\n        updateProduct,\n        updateCurrency,\n        cart,\n        addCart,\n        selectedObject,\n        selectedArr,\n        productCartForm,\n        mergeObject,\n        mergeAttributes\n      },\n      children: this.props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Alin/Desktop/Projects/class-commerce/src/Components/Context.js"],"names":["React","Component","DataContext","createContext","DataProvider","constructor","props","updateProduct","id","setState","currentProduct","updateCategory","name","currentCategory","updateCurrency","e","currenctCurrency","target","value","mergeObject","product","selectedObject","productCartForm","mergeAttributes","state","selectedArr","push","addCart","cart","check","every","item","alert","products","categories","currentCurrency","productNoSelection","componentDidMount","loadCategories","loadProduct","res","fetch","method","headers","body","JSON","stringify","query","data","json","render","children"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\n\nexport const DataContext = React.createContext()\n\nexport class DataProvider extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      products: {},\n      categories: [],\n      currentCategory: \"all\",\n      currentProduct: \"ps-5\",\n      currentCurrency: \"0\",\n      cart: [],\n      selectedObject: {},\n      selectedArr: [],\n      productCartForm: {},\n      productNoSelection: {},\n      product: {}\n    }\n  }\n  updateProduct = (id) => {\n    this.setState({ currentProduct: id })\n  }\n  updateCategory = (name) => {\n    this.setState({ currentCategory: name })\n  }\n  updateCurrency = e => {\n    this.setState({ currenctCurrency: e.target.value })\n  }\n\n  mergeObject = (product, selectedObject) => {\n    this.setState({ productCartForm: { ...product, selectedObject } })\n  }\n\n  mergeAttributes = () => {\n    this.state.selectedArr.push(this.state.productCartForm)\n  }\n\n  addCart = (id) => {\n    const { cart, productCartForm } = this.state;\n        const check = cart.every(item => {\n            return item.id !== id\n        })\n        if (check) {\n          cart.push(productCartForm)\n          this.setState({ productCartForm: {} })\n        } else {\n            alert(\"Product has already been added to the cart.\")\n        }\n    }\n\n\n  componentDidMount() {\n    this.loadCategories()\n    this.loadProduct()\n  }\n\n  async loadCategories() {\n    const res = await fetch(\"http://localhost:4000/\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        query: `\n          query {\n            categories {\n              name\n              products {\n                id\n                name\n                inStock\n                gallery\n                description\n                category\n                attributes {\n                  id\n                  name\n                  type\n                  items {\n                    displayValue\n                    value\n                    id\n                  }\n                }\n                prices {\n                  currency {\n                    label\n                    symbol\n                  }\n                  amount\n                }\n                brand\n              }\n            }\n        }\n         `\n      })\n    })\n    const { data } = await res.json()\n    const { categories } = data || {}\n    this.setState({ categories })\n    this.setState({ products: categories[0].products })\n }\n\n async loadProduct() {\n  const res = await fetch(\"http://localhost:4000/\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      query: `\n        query {\n            product (id: \"${this.state.currentProduct}\") { \n            id\n            name\n            inStock\n            gallery\n            description\n            category\n            attributes {\n              id\n              name\n              type\n              items {\n                displayValue\n                value\n                id\n              }\n            }\n            prices {\n              currency {\n                label\n                symbol\n              }\n              amount\n            }\n            brand\n          }\n        }\n       `\n    })\n  })\n  const { data } = await res.json()\n  const { product } = data || {}\n  this.setState({ product })\n }\n\n  render() {\n    const { products, categories, currentCategory, currentProduct, currentCurrency, cart, selectedObject = {}, selectedArr, productNoSelection, productCartForm, product } = this.state\n    const { updateProduct, updateCategory, updateCurrency, mergeObject, mergeAttributes, addCart } = this\n      // console.log(currentCurrency)\n\n    return (\n      <DataContext.Provider\n        value={{ products, categories, currentCategory,\n           currentProduct, currentCurrency, updateCategory, updateProduct, updateCurrency, cart, addCart, selectedObject, selectedArr, productCartForm, mergeObject, mergeAttributes }}\n      >\n        {this.props.children}\n\n      </DataContext.Provider>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}